name: ðŸ”§ Build (dry-run)

on:
  workflow_dispatch:
  push:
    branches: [ develop ]
  pull_request_target:
    types:
      - opened
      - reopened
      - edited
      - synchronize
jobs:
  build-dry-run:
    runs-on: ubuntu-latest
    env:
      NEXT_PUBLIC_SDK__AUTHENTICATION_URL: "https://dry.run"
      NEXT_PUBLIC_UI_FLEEK_REST_API_URL: "https://dry.run"
      NEXT_PUBLIC_UI__DYNAMIC_ENVIRONMENT_ID: "dry.run"
      NEXT_PUBLIC_UI__FEEDBACK_FISH_PROJECT_ID: "dry.run"
      NEXT_PUBLIC_UI__GTM_ID: "dry.run"
      NEXT_PUBLIC_UI__LAUNCH_DARKLY_CLIENT_ID: "dry.run"
      NEXT_PUBLIC_UI__LOG_ROCKET_ID: "dry.run"
      NEXT_PUBLIC_UI__POSTHOG_HOST: "https://dry.run"
      NEXT_PUBLIC_UI__POSTHOG_KEY: "dry.run"
      NEXT_PUBLIC_UI__SITE_SLUG_DOMAIN: "dry.run"
      NEXT_PUBLIC_UI__STRIPE_PUBLIC_KEY: "dry.run"
      NEXT_PUBLIC_UI__WEB3AUTH_CLIENT_ID: "dry.run"
      NEXT_PUBLIC_UI__ZENDESK_PROXY_API: "https://dry.run"
      NEXT_PUBLIC_ZENDESK_PROXY_HOSTNAME: "dry.run"
      NEXT_PUBLIC_UI__UPLOAD_PROXY_API_URL: "https://dry.run"
      NEXT_PUBLIC_UI__INTERNAL_IPFS_STORAGE_HOSTNAME: "dry.run"
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
          ref: ${{ github.head_ref || github.ref_name }}

      - name: Setup node
        uses: actions/setup-node@v4
        with:
          node-version: 18

      - uses: pnpm/action-setup@v4
        name: Install pnpm
        with:
          version: 9

      - name: Install
        run: pnpm i

      - name: Build site
        run: pnpm run build
